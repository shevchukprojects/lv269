package server7.testng;

import org.testng.Assert;
import org.testng.annotations.*;
import server7.testng.Pages.ProductPg;

/**
 * This class is for testing opening page 'Products' in two ways: with folded
 * sidebar and with unfolded one.
 * Before each test a WebDriver creates and after them closes.
 */
public class ChromeProductsPgOpenTest {

    public WebDriverCreator webDriverCreator;
    public ProductPg productPg;

    @BeforeClass
    public void createDrivers() {
        webDriverCreator = new WebDriverCreator();
        webDriverCreator.setWebdriverChrome();
        productPg = new ProductPg(webDriverCreator);
        productPg.login_admin();
    }

    @DataProvider
    public Object[][] FoldSidebar() {
        return new Object[][]{{true}, {false}};
    }

    /**
     * Open 'Product' page on Chrome browser
     */
    @Test(dataProvider = "FoldSidebar")
    public void openProductsPgChromeUnfoldSbarTest(boolean isSbarFold ) {
        productPg.open(isSbarFold);
        Assert.assertTrue(productPg.isOpened(),
                Messages.FAIL_ENTER_PRODUCTS_CHROME.getMessage());
    }

    @AfterMethod
    public void openMainAdmPg() {
        productPg.openMainAdmPg();
    }

    @AfterClass
    public void driverQuit() {
        webDriverCreator.quitDriver();
    }
}
