package com.softserve.edu.opencart.testng;

import com.softserve.edu.opencart.testng.constants.Messages;
import com.softserve.edu.opencart.testng.pages.admin.ProductPg;
import org.testng.Assert;
import org.testng.annotations.*;

/**
 * This class is for testing opening page 'Products' in two ways: with folded
 * sidebar and with unfolded one.
 * Before each test a WebDriver creates and after them closes.
 */
public class MozillaProductsPgOpenTest {

    public WebDriverManager webDriverManager;
    public ProductPg productPg;

    @BeforeClass
    public void createDrivers() {
        webDriverManager = new WebDriverManager();
        webDriverManager.setWebdriverFirefox();
        productPg = new ProductPg(webDriverManager);
        productPg.login_admin();
    }

    @DataProvider
    public Object[][] FoldSidebar() {
        return new Object[][]{{false}, {true}};
    }

    /**
     * Open 'Product' page on Chrome browser
     */
    @Test(dataProvider = "FoldSidebar")
    public void openProductsPgMozillaTest(boolean isSbarFold ) {
        productPg.open(isSbarFold);
        Assert.assertTrue(productPg.isOpened(),
                Messages.FAIL_ENTER_PRODUCTS_CHROME.getMessage());
    }

    @AfterMethod
    public void openMainAdmPg() {
        productPg.openMainAdmPg();
    }

    @AfterClass
    public void driverQuit() {
        webDriverManager.quitDriver();
    }
}
