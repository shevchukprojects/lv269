package com.softserve.edu.opencart.testng;

import com.softserve.edu.opencart.testng.constants.Messages;
import org.testng.Assert;
import org.testng.annotations.*;
import com.softserve.edu.opencart.testng.pages.admin.MainAdmPg;
import com.softserve.edu.opencart.testng.pages.admin.ProductPg;

/**
 * This class is for testing opening page 'Products' in two ways: with folded
 * sidebar and with unfolded one.
 * Before each test a WebDriver creates and after them closes.
 */
public class ChromeProductsPgOpenTest {

    public WebDriverManager webDriverManager;

    @BeforeClass
    public void createDrivers() {
        webDriverManager = new WebDriverManager();
        webDriverManager.setWebdriverChrome();
    }

    @BeforeMethod
    public void openMainAdmPg () {
        new MainAdmPg(webDriverManager).openPgAddress();
    }

    @DataProvider
    public Object[][] FoldSidebar() {
        return new Object[][]{{true}, {false}};
    }

    /**
     * Open 'Product' page on Chrome browser
     */
    @Test(dataProvider = "FoldSidebar")
    public void openProductsPgChromeUnfoldSbarTest(boolean sbarFoldFlag ) {
        new MainAdmPg(webDriverManager).openProductPg(sbarFoldFlag);
        Assert.assertTrue(new ProductPg(webDriverManager).isOpened(),
                Messages.FAIL_ENTER_PRODUCTS_CHROME.getMessage());
    }

    @AfterClass
    public void driverQuit() {
        webDriverManager.quitDriver();
    }
}
