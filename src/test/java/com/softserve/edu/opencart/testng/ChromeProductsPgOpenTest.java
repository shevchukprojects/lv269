package com.softserve.edu.opencart.testng;

import org.testng.Assert;
import org.testng.annotations.*;
import com.softserve.edu.opencart.testng.pages.admin.MainAdmPg;
import com.softserve.edu.opencart.testng.pages.admin.ProductPg;

/**
 * This class is for testing opening page 'Products' in two ways: with folded
 * sidebar and with unfolded one.
 * Before each test a WebDriver creates and after them closes.
 */
public class ChromeProductsPgOpenTest {

    public WebDriverCreator webDriverCreator;

    @BeforeClass
    public void createDrivers() {
        webDriverCreator = new WebDriverCreator();
        webDriverCreator.setWebdriverChrome();
    }

    @BeforeMethod
    public void openMainAdmPg () {
        new MainAdmPg(webDriverCreator).openPgAddress();
    }

    @DataProvider
    public Object[][] FoldSidebar() {
        return new Object[][]{{true}, {false}};
    }

    /**
     * Open 'Product' page on Chrome browser
     */
    @Test(dataProvider = "FoldSidebar")
    public void openProductsPgChromeUnfoldSbarTest(boolean sbarFoldFlag ) {
        new MainAdmPg(webDriverCreator).openProductPg(sbarFoldFlag);
        Assert.assertTrue(new ProductPg(webDriverCreator).isOpened(),
                Messages.FAIL_ENTER_PRODUCTS_CHROME.getMessage());
    }

    @AfterClass
    public void driverQuit() {
        webDriverCreator.quitDriver();
    }
}
